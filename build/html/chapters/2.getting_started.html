

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>1. Pre-requisites &mdash; N&amp;F-Trivia 2021-06-06 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1. Overview" href="3.internals.html" />
    <link rel="prev" title="Introduction" href="1.introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> N&F-Trivia
          

          
            
            <img src="../_static/nflogo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="1.introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="1.introduction.html#quick-links">Quick Links</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Pre-requisites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#node-npm">1.1. Node &amp; NPM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#express">1.2. Express</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nginx">1.3. NGINX</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nginx-commands">1.3.1. NGINX Commands</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#installation">2. Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Internals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="3.internals.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.internals.html#nidgets">2. Nidgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.internals.html#root-html-pages">3. Root HTML Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.internals.html#game-manager-endpoint">4. Game Manager Endpoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.internals.html#game-description-model">5. Game Description Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.internals.html#tests">6. Tests</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">N&F-Trivia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">1. </span>Pre-requisites</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/chapters/2.getting_started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pre-requisites">
<h1><span class="section-number">1. </span>Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this headline">¶</a></h1>
<div class="section" id="node-npm">
<h2><span class="section-number">1.1. </span>Node &amp; NPM<a class="headerlink" href="#node-npm" title="Permalink to this headline">¶</a></h2>
<p>The app is written in ES6 style javascript using NodeJS.
Visit <a class="reference external" href="https://nodejs.org/en/">https://nodejs.org/en/</a> to download and install your version of NodeJS.</p>
<p><a class="reference external" href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
</div>
<div class="section" id="express">
<h2><span class="section-number">1.2. </span>Express<a class="headerlink" href="#express" title="Permalink to this headline">¶</a></h2>
<p>The app runs on Express; a NodeJS web server.  By default, it runs on
port 8000.  SSL has not been setup in the app, it is recommended that
a reverse-proxy is used to provide SSL security.</p>
<p><a class="reference external" href="https://expressjs.com/">https://expressjs.com/</a></p>
</div>
<div class="section" id="nginx">
<h2><span class="section-number">1.3. </span>NGINX<a class="headerlink" href="#nginx" title="Permalink to this headline">¶</a></h2>
<p>The app is intended to run behind a proxy, and has been built with NGINX in mind.
An example server file has been provided &lt;here&gt; and should be put in the
<code class="docutils literal notranslate"><span class="pre">/etc/nginx/sites-available</span></code> folder.</p>
<p><a class="reference external" href="https://www.nginx.com/">https://www.nginx.com/</a></p>
<div class="section" id="nginx-commands">
<h3><span class="section-number">1.3.1. </span>NGINX Commands<a class="headerlink" href="#nginx-commands" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl status nginx
systemctl start nginx
systemctl stop nginx
systemctl restart nginx
systemctl <span class="nb">enable</span> nginx
systemctl disable nginx
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="installation">
<h1><span class="section-number">2. </span>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Clone the repository into your server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">Thaerious</span><span class="o">/</span><span class="n">trivia</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">trivia</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
<p>Setup the reverse proxy for NGINX.
Add the following to the appropriate sites-available file (in the server block).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>location /trivia/ {
    proxy_pass http://127.0.0.1:8000/;

    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $host;
    proxy_set_header X-Read-IP $remote_addr;

    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection &quot;upgrade&quot;;
}
</pre></div>
</div>
<p><strong>Run the server manually.</strong></p>
<p>Build the style sheets with <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build-css</span></code>.  Install the node packages with <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">i</span></code>.</p>
<p>When running the server the first time include the -b flag (<code class="docutils literal notranslate"><span class="pre">node</span> <span class="pre">.</span> <span class="pre">-b</span></code>) to generate html &amp; js files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>user@frar:~/trivia-server$ node . -b
contestant_join
contestant_portal
editor
host
host_portal
launch_console
HTTP listener started on port 8000
</pre></div>
</div>
<p>Browse to <code class="docutils literal notranslate"><span class="pre">https://frar.ca/trivia/host.ejs</span></code> replace <em>frar.ca</em> with your server name.</p>
<p>For permanent installation add the systemd settings file.  A script has been provided to
setup the systemd file.  It needs to be run as sudo because it updates the /etc/systemd/system directory.
Pass in the username that you want to run the server as.  It will use the current working directory
so make sure you are in the project’s root directory.  The following assumes the -b flag was used at least once.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">bash</span> <span class="n">install</span><span class="o">.</span><span class="n">bat</span> <span class="n">USERNAME</span> <span class="c1"># setup systemd config file</span>
<span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">daemon</span><span class="o">-</span><span class="n">reload</span> <span class="c1"># to restart systemd</span>
<span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">start</span> <span class="n">trivia</span> <span class="c1"># to start trivia server</span>
<span class="n">sudo</span> <span class="n">journalctl</span> <span class="o">-</span><span class="n">u</span> <span class="n">trivia</span> <span class="c1"># to view results</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">Thaerious</span><span class="o">/</span><span class="n">trivia</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">trivia</span><span class="o">-</span><span class="n">server</span>
<span class="n">npm</span> <span class="n">i</span>
<span class="n">npm</span> <span class="n">run</span> <span class="n">build</span><span class="o">-</span><span class="n">css</span>
<span class="n">sudo</span> <span class="n">bash</span> <span class="n">install</span><span class="o">.</span><span class="n">bat</span> <span class="n">USERNAME</span>
<span class="n">node</span> <span class="o">.</span> <span class="o">-</span><span class="n">b</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="3.internals.html" class="btn btn-neutral float-right" title="1. Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="1.introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Ed Armstrong.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>